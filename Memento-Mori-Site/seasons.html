<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Memento Mori – Seasons</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;600&family=Roboto+Mono:wght@300;400&display=swap" rel="stylesheet">
    <script src="auth.js" defer></script>
</head>
<body>
<header class="site-header">
    <div class="header-inner">
        <h1 class="site-title">Memento Mori</h1>
        <nav class="main-nav">
            <div class="nav-item">
                <a href="index.html" class="nav-link">Home</a>
            </div>
            <div class="nav-item has-dropdown">
                <a href="about.html" class="nav-link">About</a>
                <div class="dropdown">
                    <a href="about.html" class="dropdown-link">About</a>
                    <a href="guide.html" class="dropdown-link">New Survivor Guide</a>
                </div>
            </div>
            <div class="nav-item has-dropdown">
                <a href="seasons.html" class="nav-link active">Seasons</a>
                <div class="dropdown">
                    <a href="seasons.html" class="dropdown-link active">Season Dashboard</a>
                    <a href="patch-notes.html" class="dropdown-link">Patch Notes</a>
                    <a href="timeline.html" class="dropdown-link">Timeline</a>
                </div>
            </div>
            <div class="nav-item has-dropdown">
                <a href="players.html" class="nav-link">Players</a>
                <div class="dropdown">
                    <a href="players.html" class="dropdown-link">Players Overview</a>
                    <a href="map.html" class="dropdown-link">Map</a>
                    <a href="stories.html" class="dropdown-link">Stories</a>
                    <a href="factions.html" class="dropdown-link">Factions</a>
                    <a href="leaderboards.html" class="dropdown-link">Leaderboards</a>
                    <a href="gallery.html" class="dropdown-link">Gallery</a>
                </div>
            </div>
            <div class="nav-item">
                <a href="join.html" class="nav-link">Join</a>
            </div>
            <div class="nav-item has-dropdown">
                <a href="admin.html" class="nav-link">Admins</a>
                <div class="dropdown">
                    <a href="admin.html" class="dropdown-link">Admin Console</a>
                    <a href="admin.html#seasons" class="dropdown-link">Season Admin</a>
                    <a href="admin.html#patch-notes" class="dropdown-link">Patch Notes Admin</a>
                    <a href="admin.html#stories" class="dropdown-link">Stories Admin</a>
                    <a href="admin.html#factions" class="dropdown-link">Factions Admin</a>
                    <a href="admin.html#leaderboards" class="dropdown-link">Leaderboards Admin</a>
                </div>
            </div>
        </nav>
    </div>
</header>
<main>
    <section class="page-hero">
        <div class="section-inner">
            <h2>Season Dashboard</h2>
            <p class="muted">Track the current chapter, see the ruleset at a glance, and revisit past seasons.</p>
        </div>
    </section>

    <section class="panel">
        <div class="section-inner season-grid">
            <div class="season-card">
                <div class="card-header">
                    <div>
                        <p class="eyebrow">Active Season</p>
                        <h3>Season 5 — Black Forest</h3>
                    </div>
                    <span class="badge badge-hot">LIVE</span>
                </div>
                <p class="muted">Hardcore survival on Livonia with brutal storms, low loot, and PvP-enabled trader zones.</p>
                <div class="season-meta">
                    <div>
                        <p class="meta-label">Map</p>
                        <p class="meta-value">Livonia</p>
                    </div>
                    <div>
                        <p class="meta-label">Difficulty</p>
                        <p class="meta-value">Hardcore</p>
                    </div>
                    <div>
                        <p class="meta-label">Start</p>
                        <p class="meta-value">Jan 12</p>
                    </div>
                    <div>
                        <p class="meta-label">Current Day</p>
                        <p class="meta-value">27</p>
                    </div>
                </div>
                <div class="flag-row">
                    <span class="pill">Harsh Weather</span>
                    <span class="pill">Low Loot</span>
                    <span class="pill">PvP Focus</span>
                </div>
                <div class="status-widget">
                    <div class="stat">
                        <p class="meta-label">Status</p>
                        <p class="meta-value">Online</p>
                    </div>
                    <div class="stat">
                        <p class="meta-label">Players</p>
                        <p class="meta-value">43 / 60</p>
                    </div>
                    <div class="stat">
                        <p class="meta-label">Last Restart</p>
                        <p class="meta-value">1h 12m ago</p>
                    </div>
                </div>
            </div>
            <div class="season-card">
                <div class="card-header">
                    <div>
                        <p class="eyebrow">Lore Snapshot</p>
                        <h3>Storm Signals</h3>
                    </div>
                    <span class="badge">Event Hooks</span>
                </div>
                <p class="muted">Bandit beacons are flaring near Zalesie. Weather towers are failing. Traders warned to travel in convoys.</p>
                <ul class="bullet-list">
                    <li>Weekly dynamic storms shift safe routes.</li>
                    <li>Heli crashes bias northern sectors.</li>
                    <li>New experimental medical loot in hunting cabins.</li>
                </ul>
                <div class="cta-row">
                    <a class="btn btn-primary" href="patch-notes.html">See Patch Notes</a>
                    <a class="btn btn-ghost" href="timeline.html">Season Timeline</a>
                </div>
            </div>
        </div>
    </section>

    <section class="panel">
        <div class="section-inner">
            <div class="card-header">
                <div>
                    <p class="eyebrow">Past Seasons</p>
                    <h3>Archives</h3>
                </div>
                <a class="btn btn-outline" href="gallery.html">View Media</a>
            </div>
            <div class="card-grid">
                <article class="info-card">
                    <h4>Season 4 — Dead Signal</h4>
                    <p class="muted">Dynamic radiation storms and power-grid objectives on Chernarus.</p>
                    <div class="flag-row">
                        <span class="pill">Story of the Week: Vela</span>
                        <span class="pill">Hall of Fame Recorded</span>
                    </div>
                </article>
                <article class="info-card">
                    <h4>Season 3 — Dust Market</h4>
                    <p class="muted">Scarcity-driven economy with player-built safe zones and caravan events.</p>
                    <div class="flag-row">
                        <span class="pill">Low-Loot Purge</span>
                        <span class="pill">Bandit Raids</span>
                    </div>
                </article>
                <article class="info-card">
                    <h4>Season 2 — Ghost Frequency</h4>
                    <p class="muted">Signal-based missions and radio puzzles across the woods.</p>
                    <div class="flag-row">
                        <span class="pill">Storyline Missions</span>
                    </div>
                </article>
            </div>
        </div>
    </section>

    <section class="panel">
        <div class="section-inner">
            <h3>Live Seasons (API)</h3>
            <div id="season-api-list" class="season-grid"></div>
        </div>
    </section>
</main>

<footer class="site-footer">
    <div class="footer-inner">
        <div class="footer-col">
            <h4>Server</h4>
            <ul>
                <li>Region: NA</li>
                <li>Style: Hardcore Survival</li>
                <li>Mode: Seasonal / Story-Driven</li>
            </ul>
        </div>
        <div class="footer-col">
            <h4>Links</h4>
            <ul>
                <li><a href="https://discord.gg/your-invite" target="_blank">Discord</a></li>
                <li><a href="join.html">How to Join</a></li>
                <li><a href="about.html">About the Team</a></li>
            </ul>
        </div>
        <div class="footer-col">
            <h4>Notes</h4>
            <p>
                Memento Mori is a community-run DayZ server project.
                Not affiliated with or endorsed by Bohemia Interactive.
            </p>
        </div>
    </div>
    <div class="footer-meta">
        <span>&copy; <span id="year"></span> Memento Mori Server</span>
        <span>Last wipe: Seasonal schedule</span>
    </div>
</footer>
<script>
    document.getElementById('year').textContent = new Date().getFullYear();
    async function loadSeasons() {
        const currentRes = await fetch('/api/seasons/current');
        const seasonsRes = await fetch('/api/seasons');
        const current = await currentRes.json();
        const seasons = await seasonsRes.json();
        const container = document.getElementById('season-api-list');
        container.innerHTML = '';
        if (current) {
            const card = document.createElement('div');
            card.className = 'season-card';
            card.innerHTML = `<div class="card-header"><div><p class="eyebrow">Active Season</p><h3>${current.name}</h3></div><span class="badge badge-hot">LIVE</span></div>
            <p class="muted">${current.lore_blurb || ''}</p>
            <div class="season-meta"><div><p class="meta-label">Map</p><p class="meta-value">${current.map_name}</p></div><div><p class="meta-label">Difficulty</p><p class="meta-value">${current.difficulty}</p></div><div><p class="meta-label">Start</p><p class="meta-value">${current.start_date}</p></div></div>`;
            container.appendChild(card);
        }
        seasons.forEach((s) => {
            const card = document.createElement('div');
            card.className = 'season-card';
            card.innerHTML = `<div class="card-header"><div><p class="eyebrow">Season</p><h3>${s.name}</h3></div></div>
            <p class="muted">${s.lore_blurb || ''}</p>
            <div class="season-meta"><div><p class="meta-label">Map</p><p class="meta-value">${s.map_name}</p></div><div><p class="meta-label">Difficulty</p><p class="meta-value">${s.difficulty}</p></div><div><p class="meta-label">Start</p><p class="meta-value">${s.start_date}</p></div></div>`;
            container.appendChild(card);
        });
    }
    loadSeasons();
</script>
</body>
</html>
